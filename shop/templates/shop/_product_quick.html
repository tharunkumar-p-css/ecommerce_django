{# templates/shop/_product_quick.html #}
<div class="quick-view-grid" style="display:flex;gap:18px;align-items:flex-start;max-width:880px;">
  <div class="q-left" style="flex:0 0 320px;">
    {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100%;height:320px;object-fit:cover;border-radius:10px;">
    {% else %}
      <div style="width:100%;height:320px;background:#f6f6f6;border-radius:10px;display:flex;align-items:center;justify-content:center;">No image</div>
    {% endif %}
  </div>

  <div class="q-right" style="flex:1;display:flex;flex-direction:column;gap:12px;">
    <div style="display:flex;align-items:center;gap:12px;">
      <h2 style="margin:0;font-size:20px;">{{ product.name }}</h2>
      {% if product.category %}
        <span class="muted" style="font-size:13px;padding:6px 10px;border-radius:8px;background:#fbfbfb;border:1px solid #f0f0f0;">{{ product.category.name }}</span>
      {% endif %}
    </div>

    {# Price display: use offer if present #}
    <div style="display:flex;align-items:center;gap:12px;">
      {% if product.has_offer %}
        <div style="font-size:20px;font-weight:800;">₹{{ product.get_display_price }}</div>
        <div class="muted" style="text-decoration:line-through;color:#6b7280;">₹{{ product.price }}</div>
        {% if product.discount_percent %}
          <div style="background:#fff0f6;color:#b91c1c;padding:6px 8px;border-radius:10px;font-weight:700;">-{{ product.discount_percent }}%</div>
        {% endif %}
      {% else %}
        <div style="font-size:20px;font-weight:800;">₹{{ product.price }}</div>
      {% endif %}
    </div>

    <p class="muted small" style="margin:0;">{{ product.description|truncatechars:180 }}</p>

    <form method="post" action="{{ product.get_absolute_url }}" style="margin-top:10px;display:flex;align-items:center;gap:10px;">
      {% csrf_token %}
      <label for="quick-qty-{{ product.id }}" class="muted small" style="margin:0;">Qty</label>
      <input id="quick-qty-{{ product.id }}" name="quantity" type="number" value="1" min="1" style="width:70px;padding:6px;border-radius:6px;border:1px solid #ddd;">

      <button type="submit" class="btn btn-primary" style="padding:8px 12px;">Add to cart</button>

      <!-- Use the Back link instead of Quick view button on product page; here we keep a Back link too -->
      <a href="{% url 'shop:product_list' %}" class="btn" style="padding:8px 12px;">← Back</a>

      <!-- Close modal quick link (modal close script listens for [data-close]) -->
      <button type="button" data-close class="btn" style="padding:8px 12px;background:transparent;border:1px solid #e5e7eb;border-radius:8px;">Close</button>
    </form>

    <div style="margin-top:8px;color:#6b7280;font-size:13px;">
      <small>Free shipping on orders over ₹999. Return within 14 days.</small>
    </div>
  </div>
</div>